




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gene's Lechon - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/layout.css">
</head>
<body>

<aside id="sidebar-placeholder"></aside>

<main class="main-content">
    <header>
        <div class="header-left">
            <h1>Dashboard Overview</h1>
            <p id="currentDate">Loading...</p>
        </div>
        <div class="header-filters">
            <select id="filter-type" onchange="toggleFilterInput()">
                <option value="all">All Time</option>
                <option value="date">Specific Date</option>
                <option value="month">Specific Month</option>
            </select>
            <input type="date" id="filter-date" class="filter-input" style="display:none;">
            <input type="month" id="filter-month" class="filter-input" style="display:none;">
            <button class="btn-primary" onclick="applyFilters()">Apply Filter</button>
            <button class="btn-outline" onclick="resetFilters()"><i class="fas fa-sync"></i></button>
        </div>
        <div class="header-right">
            <div class="user-profile">
                <img src="https://ui-avatars.com/api/?name=Admin&background=ff4e00&color=fff" alt="Admin">
                <div class="user-info">
                    <span class="name" id="display-name">Administrator</span>
                    <span class="role" id="display-role">Manager</span>
                </div>
            </div>
        </div>
    </header>

    <!-- STAT CARDS -->
    <div class="dashboard-stats-grid">
        <div class="stat-card orange">
            <div class="icon-box"><i class="fas fa-wallet"></i></div>
            <div>
                <span class="label">Total Sales</span>
                <h3 id="stat-total-sales">₱0.00</h3>
            </div>
        </div>
        <div class="stat-card blue">
            <div class="icon-box"><i class="fas fa-shopping-bag"></i></div>
            <div>
                <span class="label">Total Orders</span>
                <h3 id="stat-total-orders">0</h3>
            </div>
        </div>
        <div class="stat-card green">
            <div class="icon-box"><i class="fas fa-chart-line"></i></div>
            <div>
                <span class="label">Avg. Order</span>
                <h3 id="stat-avg-sales">₱0.00</h3>
            </div>
        </div>
        <div class="stat-card purple">
            <div class="icon-box"><i class="fas fa-users"></i></div>
            <div>
                <span class="label">Customers</span>
                <h3 id="stat-total-customers">0</h3>
            </div>
        </div>
        <div class="stat-card red">
            <div class="icon-box"><i class="fas fa-ban"></i></div>
            <div>
                <span class="label">Cancelled</span>
                <h3 id="stat-cancelled">0</h3>
            </div>
        </div>
        <!-- ✅ Total Inquiries — clickable, links to Inquiries page -->
        <div class="stat-card teal" onclick="window.location.href='Inquiries.html'" style="cursor:pointer;" title="View all inquiries">
            <div class="icon-box"><i class="fas fa-envelope-open-text"></i></div>
            <div>
                <span class="label">Total Inquiries</span>
                <h3 id="stat-total-inquiries">—</h3>
                <span id="stat-pending-inquiries" style="font-size:11px;font-weight:600;color:#f57f17;"></span>
            </div>
        </div>
    </div>

    <!-- CHARTS ROW 1 -->
    <div class="dashboard-grid-new">
        <div class="chart-row">
            <div class="card chart-wide">
                <div class="card-header"><h3>Sales Revenue Trend</h3></div>
                <div class="chart-wrapper"><canvas id="salesTrendChart"></canvas></div>
            </div>
            <div class="card chart-narrow">
                <div class="card-header"><h3>Top Categories</h3></div>
                <div class="chart-wrapper"><canvas id="categoryChart"></canvas></div>
            </div>
        </div>

        <!-- CHARTS ROW 2 -->
        <div class="chart-row">
            <div class="card chart-wide">
                <div class="card-header"><h3>Peak Hours Traffic</h3></div>
                <div class="chart-wrapper"><canvas id="peakHoursChart"></canvas></div>
            </div>
            <div class="card chart-narrow">
                <div class="card-header"><h3>Top Selling Products</h3></div>
                <div class="chart-wrapper"><canvas id="topProductsChart"></canvas></div>
            </div>
        </div>

        <!-- ✅ CHARTS ROW 3 — Inquiries per Day -->
        <div class="chart-row">
            <div class="card" style="flex:1;width:100%;">
                <div class="card-header">
                    <h3><i class="fas fa-envelope-open-text" style="color:#00796b;margin-right:7px;"></i>Inquiries per Day</h3>
                    <a href="Inquiries.html" style="font-size:12px;color:#00796b;font-weight:600;text-decoration:none;">View all →</a>
                </div>
                <div class="chart-wrapper"><canvas id="inquiryChart"></canvas></div>
            </div>
        </div>
    </div>
</main>

<!-- MODALS -->
<div class="modal" id="settingsModal">
    <div class="modal-content small-modal">
        <div class="modal-header">
            <h3>System Settings</h3>
            <button class="close-modal" onclick="window.closeModals()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="setting-item">
                <div class="setting-info"><h4>Dark Mode</h4><p>Switch to dark theme</p></div>
                <label class="switch">
                    <input type="checkbox" id="darkModeSwitch">
                    <span class="slider round"></span>
                </label>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-primary" onclick="window.saveSettings()">Save Changes</button>
        </div>
    </div>
</div>

<div class="modal" id="logoutModal">
    <div class="modal-content small-modal text-center">
        <div class="modal-body" style="padding-top:30px;">
            <i class="fas fa-sign-out-alt" style="font-size:40px;color:var(--primary);margin-bottom:20px;"></i>
            <h3 style="margin-bottom:10px;">Sign Out?</h3>
            <p style="color:var(--text-grey);margin-bottom:30px;">Are you sure you want to log out of the system?</p>
            <div style="display:flex;gap:10px;justify-content:center;">
                <button class="btn-outline" onclick="window.closeModals()">Cancel</button>
                <button class="btn-danger" onclick="window.performLogout()">Log Out</button>
            </div>
        </div>
    </div>
</div>

<script type="module">
    import { initSidebar } from './js/sidebar.js';
    document.addEventListener('DOMContentLoaded', () => { initSidebar(); });
</script>
<script type="module" src="js/auth.js"></script>
<script type="module" src="js/dashboard.js"></script>

</body>
</html>